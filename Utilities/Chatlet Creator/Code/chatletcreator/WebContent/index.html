<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta content="width=device-width,initial-scale=1.0" name="viewport">
  <title>Chatlet Creator</title>
  <link href="style1.css" type="text/css" rel="stylesheet" media="screen,projection" />
  <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="style2.css"/>
</head>

<body>
<script src="jquery-1.11.3.min.js"></script>
<script src="print.js"></script>
    <div class="menu">
      <div class="slider">
        <ul>
          <li class="category active"><a href="#home">Step 1<br>Type Of Chatlet</a></li>
          <li class="category"><a href="#search">Step 2<br>Set Chatlet Content</a></li>
          <li class="category"><a href="#about">Step 3<br>Set Reply Screen</a></li>
          <li class="category"><a href="#contact">Step 4<br>Comments Visibility</a></li>
          <li class="category"><a href="#details_screen">Step 5<br>Set Details Screen</a></li>
          <li class="category"><a href="#final">Step 6<br>Post Chatlet</a></li>
        </ul>
        
        <div class="bar">
          <div class="before"></div>
          <a class="knob"></a>
          <div class="after"></div>
        </div>
      </div><br>
    </div>
    
    <div id="home" class="container">
      <div class="header">
        <h1>What Type of Chatlet do you want to make?</h1>
        <h1>
        <input  id="r00" type="radio" name="type" checked="checked">Text/HTML Chatlet<br><br>
        <input  id="r01" type="radio" name="type" >Poll Chatlet<br><br>
        <input  id="r02" type="radio" name="type" >Survey Chatlet
        </h1>
        <input type="button" id="button1" class=myButton value="Next Step">
      </div>
    </div>
    <div id="search" class="container green">
		<div id="text" class="header" style="visibility:hidden; position:absolute; margin-left:250px"><h1>You have selected Text/HTML Chatlet!</h1></div> 
		<div id="poll" class="header" style="visibility:hidden; position:absolute; margin-left:250px"><h1>You have selected Poll Chatlet!</h1></div> 
		<div id="survey" class="header" style="visibility:hidden; position:absolute; margin-left:250px"><h1>You have selected Survey Chatlet!</h1></div> 
		
		<h1
			style="margin: 0; margin-left:-700px; margin-top: 120px; padding: 0; padding-left: 25px; padding-bottom: 10px; font-family: sans-serif;">
			Question</h1>
		<input  id="text_input" type="text" class="css-input" placeholder="What are the sales?" onfocus=="this.value=''"  style="margin-left:-425px; position:absolute;">
	    
	   <div id="survey_screen" style="visibility:hidden;"> <h1
			style="margin: 0; margin-left:-700px; margin-top: 80px; padding: 0; padding-left: 25px; padding-bottom: 10px; font-family: sans-serif;">
			Options</h1>
	    
	    <div id="main">
    
    <div class="my-form" style="margin-top:5px; margin-left:195px; position:absolute;">
        <form role="form" method="post">
            <p class="text-box">
                <label for="box1">Option<span class="box-number">1</span></label>
                <input type="text" name="boxes[]" value="" id="box1" class="css-input" /><br>
                
            </p><br>
            <p class="text-box">
                <label for="box2">Option<span class="box-number">2</span></label>
                <input type="text" name="boxes[]" value="" id="box2" class="css-input" /><br>
                
            </p><br>
		<p class="text-box">
                <label for="box3">Option<span class="box-number">3</span></label>
                <input type="text" name="boxes[]" value="" id="box3" class="css-input" /><br>
                
            </p>
<br>
		<p class="text-box">
                <label for="box4">Option<span class="box-number">4</span></label>
                <input type="text" name="boxes[]" value="" id="box4" class="css-input" /><br>
        </form>
    </div>
</div></div>
<!--<script type="text/javascript">
jQuery(document).ready(function($){
    $('.my-form .add-box').click(function(){
        var n = $('.text-box').length + 1;
        if( 10 < n ) {
            alert('Stop it!');
            return false;
        }
        var box_html = $('<p class="text-box"><label for="box' + n + '">Option <span class="box-number">' + n + '</span></label> <input type="text" class="css-input" name="boxes[]" value="" id="box' + n + '" /> <br><a href="#" class="remove-box">Remove</a></p>');
        box_html.hide();
        $('.my-form p.text-box:last').after(box_html);
        box_html.fadeIn('slow');
        return false;
    });
    $('.my-form').on('click', '.remove-box', function(){
        $(this).parent().css( 'background-color', '#FF6C6C' );
        $(this).parent().fadeOut("slow", function() {
            $(this).remove();
            $('.box-number').each(function(index){
                $(this).text( index + 1 );
            });
        });
        return false;
    });
});
</script> -->

	    
	    <div id="html_q" style="visibility:hidden;">
	    	<h1
			style="margin: 0; margin-left:-570px; margin-top: 100px; padding: 0; padding-left: 25px; padding-bottom: 10px; font-family: sans-serif;">
			HTML(Optional)</h1>
		<input id="html_input" type="text" class="css-input" placeholder="<html><body>...." onfocus=="this.value=''" style="margin-left:-425px; position:absolute">
	 
	    </div>
	    <h1
			style="margin: 0; margin-left:950px; margin-top: -350px; padding: 0; padding-left: 25px; padding-bottom: 10px; font-family: sans-serif; position:absolute;">
			Preview</h1>
			
			

	    
	    <!-- POLL Chatlet------****************************************************************---------------------------------------------- -->
	  
		<div id="poll_chatlet" style="position:absolute; margin-left:850px; width:400px; margin-top:-300px; visibility:hidden;">
			<div
				style="border-top: 2px solid #0086ca; background-color: #f7f7f7; font-size: 14px; font-family: inherit; max-width: 400px; margin-top: 5px">
				<div
					style="border-left: 1px solid #ececec; border-right: 1px solid #ececec; border-bottom: 1px solid #ececec">
					<div
						style="color: #404040; font-size: 12px; padding: 8px 10px 0 10px">
						<span
							style="color: #999999; margin-left: 2px; font-size: 11px; font-weight: lighter"></span>
					</div>
					<div style="color: #404040; padding: 4px 10px 8px 10px"><r3></r3></div>
					<div
						style="background-color: #e8f4fa; margin: 0px 10px 10px 10px; clear: both; overflow: hidden; border: 1px solid #e7ebed">
						<a
							style="text-decoration: none; float: left; text-align: center; border-right: 1px solid #e7ebed; background-color: #e8f4fa; width: 49%; padding: 6px 0 4px"><span
							style="color: #404040; vertical-align: middle; font-size: 14px">0</span><img
							src="images/like.png"
							style="vertical-align: middle; margin: 0 0 4px 4px; width: 20px; height: 20px; margin-bottom: 6px"></a><a
							style="text-decoration: none; float: left; text-align: center; background-color: #e8f4fa; padding: 4px 0 6px; width: 49%"><span
							style="color: #404040; vertical-align: bottom; font-size: 14px">0</span><img
							src="images/unlike.png"
							style="margin: 4px 0 0 4px; vertical-align: middle; width: 20px; height: 20px"></a>
					</div>
					<div
						style="background-color: #ebebeb; padding: 0px; clear: both; overflow: hidden">
						<a
							style="color: #0086ca; float: left; text-decoration: none; font-size: 13px; padding: 12px 10px 8px 10px"><span
							style="margin-right: 3px">0</span>Replies</a><a
							style="color: #0086ca; display: block; float: right; text-decoration: none; font-size: 13px; padding: 5px 10px 3px 0px"><img
							style="margin-left: 2px; vertical-align: -10px"><span
							style="margin-right: 3px;">0</span><i style="font-style: normal">Comments</i></a>



					</div>
				</div>
			</div>
		</div>
<!--   ************************************************************************************8 -->
 
<!-- ******************************************************************************************** -->
<div id="survey_chatlet" style="position:absolute; margin-left:850px; width:400px; margin-top:-300px; visibility:hidden;">
<div style="border-top:2px solid #0086ca;background-color:#f7f7f7;font-size:14px;font-family:inherit;max-width:400px;margin-top:5px"><div style="border-left:1px solid #ececec;border-right:1px solid #ececec;border-bottom:1px solid #ececec"><div style="color:#404040;font-size:12px;padding:8px 10px 0 10px">                          Posted on:                          <span style="color:#999999;margin-left:2px;font-size:11px;font-weight:lighter">14 Jul 2015 12:34 PM IST</span></div><div style="color:#404040;font-size:14px;padding:4px 10px 8px 10px;font-family:inherit;line-height:21px"><r4></r4></div><div style="background-color:#e8f4fa;margin:2px 10px;min-width:175px;border:1px solid #e7e7e7"><a style="color:#404040;font-size:14px;padding:7px 10px;display:block;text-decoration:none;clear:both;overflow:hidden;line-height:18px"><div style="float:left;line-height:20px"></div><a1></a1><div style="float:right;color:#404040"><img src="images/like.png" style="margin-right:3px;width:20px;height:20px;vertical-align:middle"><span style="vertical-align:bottom">0                                        </span></div></a></div>
<div   style="background-color:#e8f4fa;margin:2px 10px;min-width:175px;border:1px solid #e7e7e7"><a style="color:#404040;font-size:14px;padding:7px 10px;display:block;text-decoration:none;clear:both;overflow:hidden;line-height:18px"><b1></b1><div style="float:left;line-height:20px"></div><div style="float:right;color:#404040"><img src="images/like.png" style="margin-right:3px;width:20px;height:20px;vertical-align:middle"><span style="vertical-align:bottom">0                                        </span></div></a></div>
<div id="c" style="background-color:#e8f4fa;margin:2px 10px; min-width:175px;border:1px solid #e7e7e7"><a style="color:#404040;font-size:14px;padding:7px 10px;display:block;text-decoration:none;clear:both;overflow:hidden;line-height:18px"><c1></c1><div style="float:left;line-height:20px"></div><div style="float:right;color:#404040"><img src="images/like.png" style="margin-right:3px;width:20px;height:20px;vertical-align:middle"><span style="vertical-align:bottom">0</span></div></a></div>
<div id="d" style="background-color:#e8f4fa;margin:2px 10px;min-width:175px;border:1px solid #e7e7e7"><a style="color:#404040;font-size:14px;padding:7px 10px;display:block;text-decoration:none;clear:both;overflow:hidden;line-height:18px"><d1></d1><div style="float:left;line-height:20px"></div><div style="float:right;color:#404040"><img src="images/like.png" style="margin-right:3px;width:20px;height:20px;vertical-align:middle"><span style="vertical-align:bottom">0                                        </span></div></a></div>
<div style="background-color:#ebebeb;clear:both;overflow:hidden;margin-top:10px"><a style="float:left;text-decoration:none;color:#0086ca;font-size:13px;padding:12px 10px 8px 15px">0<span style="margin-left:5px">Replies</span></a><a style="color:#0086ca;display:block;float:right;text-decoration:none;font-size:13px;padding:5px 10px 3px 0px"><img style="margin-left:2px;vertical-align:-10px"><span style="margin-right:3px">0</span><i style="font-style:normal">Comments</i></a></div></div>
</div>
</div>
 <!-- ********************************************************************************************* -->
 
 <div id="text_chatlet" style="position:absolute; margin-left:850px; width:400px; margin-top:-300px; visibility:hidden;">       
 <div style="border-top:2px solid #0086ca;background-color:#f7f7f7;font-size:14px;font-family:inherit;max-width:400px;margin-top:5px"><div style="border-left:1px solid #ececec;border-right:1px solid #ececec;border-bottom:1px solid #ececec">
<div style="color:#404040;font-size:12px;padding:8px 10px 0 10px" align="left"> Posted on:<span style="color:#999999;margin-left:2px;font-size:11px;font-weight:lighter">18 Jun 2015 03:27 PM IST</span>
</div>
<div style="padding:8px 10px 0 15px; color:#000000;" align="left"><r1></r1></div>
<div style="padding:8px 10px 0 15px; color:#000000;" align="left"><r2></r2></div>
<br>
<div style="background-color:#ebebeb;padding:0px;clear:both;overflow:hidden">
<div style="float:left"><a style="text-decoration:none;color:#0086ca;font-size:13px;font-weight:normal;text-transform:uppercase;padding:12px 15px 8px 10px;display:block">Reply</a></div>
<div style="border-right:1px solid #d0d0d0;height:20px;float:left;margin:9px 5px 9px 0;width:1px">                                                                                      </div>
<div>
<a style="color:#0086ca;float:left;text-decoration:none;font-size:13px;padding:12px 10px 8px 10px"><span style="margin-right:3px">0</span>Replies</a></div><div><a style="color:#0086ca;display:block;float:right;text-decoration:none;font-size:13px;padding:5px 10px 3px 0px"><img style="margin-left:2px;vertical-align:-10px"><span style="margin-right:3px">0</span><i style="font-style:normal">Comments</i></a>
</div>
</div>
</div></div>      </div>
<!-- *********************************************************************************************** -->


		<input type="button" id="button2" class="myButton" value="Next Step" style="margin-top:30px; margin-left:750px">	
	</div>
	
    <div id="about" class="container blue">
      <h1><br>Do you want to enable replies for your Chatlet?</h1>
      <div class="header">
        <h1></h1>
        <h1>
        <input  id="r10" type="radio" name="rep" checked="checked">Enable Replies<br><br>
        <input  id="r11" type="radio" name="rep" >Disable Replies<br><br>
        
        </h1>
        <input type="button" id="button4" class=myButton value="Next Step">
      </div>
      
      
      
      <div id="repb"><input type="button" id="button3" value="Create Reply Screen" class="myButton" style="margin-top:-300px; margin-left:200px; position:absolute; visibility:visible;"></div>	
    		
    </div>
    <div id="contact" class="container red">
      <h1>Do you want to enable Comments on Your Chatlet </h1>
      <div class="header">
        <h1></h1>
        <h1>
        <input  id="r20" type="radio" name="com" checked="checked">Enable Comments<br><br>
        <input  id="r21" type="radio" name="com" >Disable Comments<br><br>
        
        </h1>
        <input type="button" id="button5" class=myButton value="Next Step">
      </div>
    </div>
    
    <div id="details_screen" class="container green">
    <h1>
    <div>Good Going...<br>
    Just preview your Chatlet below and click on the button to finalize your Chatlet!</div>
    <input type="button" id="button6" class=myButton value="Final Step" style="margin-top:350px; margin-left:20px;">
    </h1>
    </div>
    
    <div id="final" class="container blue">
    	<h1>You are Almost Done.<br></h1>
    	<h1>Enter Email Address of the person to send the chatlet<h1>
    	<h1
			style="margin: 0; margin-left:-750px; margin-top: 120px; padding: 0; padding-left: 25px; padding-bottom: 10px; font-family: sans-serif;">
			Email</h1>
		<input id="email" type="text" class="css-input" placeholder="Email.." onfocus=="this.value=''" style="margin-left:-425px; position:absolute">
    	<input type="button" id="button7" class=myButton value="Post Chatlet" style="margin-top:0px; margin-left:200px;">
    	</div>
    
  
  <!-- Javascript -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="js/init.js"></script>
  <script>
  $("#button1").click(function(){
	  $('html, body').animate({scrollTop: $("#search").offset().top}, 1000);
	  	
	  var type="";
	  var replies="";
	  var comments=false;
	  var text_input="";
	  var html_input="";
	  if($('#r00').is(':checked')) { 
		  							type="text";
		  							document.getElementById("text").style.visibility="visible";
	  								document.getElementById("poll").style.visibility="hidden";
	  								document.getElementById("survey").style.visibility="hidden";
	  								document.getElementById("html_q").style.visibility="visible";
	  								document.getElementById("text_chatlet").style.visibility="visible";
	  								document.getElementById("poll_chatlet").style.visibility="hidden";
	  								document.getElementById("survey_chatlet").style.visibility="hidden";
	  								document.getElementById("survey_screen").style.visibility="hidden";
	  }
	  if($('#r01').is(':checked')) { 
		  type="poll";			  
		  document.getElementById("poll").style.visibility="visible";
	  document.getElementById("text").style.visibility="hidden";
		document.getElementById("survey").style.visibility="hidden";
		document.getElementById("html_q").style.visibility="hidden";
		document.getElementById("poll_chatlet").style.visibility="visible";
		document.getElementById("text_chatlet").style.visibility="hidden";
			document.getElementById("survey_chatlet").style.visibility="hidden";
			document.getElementById("survey_screen").style.visibility="hidden";
		}
	  if($('#r02').is(':checked')) { 
		  type="survey";
		  document.getElementById("survey").style.visibility="visible";
	  document.getElementById("poll").style.visibility="hidden";
		document.getElementById("text").style.visibility="hidden";
		document.getElementById("html_q").style.visibility="hidden";
		document.getElementById("survey_chatlet").style.visibility="visible";
		document.getElementById("poll_chatlet").style.visibility="hidden";
			document.getElementById("text_chatlet").style.visibility="hidden";
			document.getElementById("survey_screen").style.visibility="visible";
			
		}
				
	});
  
  $("#button2").click(function(){
	  $('html, body').animate({scrollTop: $("#about").offset().top}, 1000);
	  text_input=document.getElementById("text_input").value;
	  html_input=document.getElementById("html_input").value;
	  console.log(text_input);
	  console.log(html_input);
	  
	});
 
  
  $("#button3").click(function(){
	  replies=false;
	  if($('#r10').is(':checked')) replies=true;
	  
	  var url = "index_replies.html";
	  var win = window.open(url, "_blank","toolbar=no, scrollbars=no, resizable=yes, top=250, left=450, width=700, height=550");
	  //var win=window.open(url);
	  win.focus(); 
  });
  
  $("#button4").click(function(){
	  if($('#r20').is(':checked')) comments=true;
	  $('html, body').animate({scrollTop: $("#contact").offset().top}, 1000);
	  
  });  
  
  $("#button5").click(function(){
	  $('html, body').animate({scrollTop: $("#details_screen").offset().top}, 1000);
	  
  });  
  
  document.getElementById("r10").onclick=function(){
	  document.getElementById("button3").style.visibility="visible";
  };
  
  document.getElementById("r11").onclick=function(){
	  document.getElementById("button3").style.visibility="hidden";
  };
  
  $("#button6").click(function(){
	  $('html, body').animate({scrollTop: $("#final").offset().top}, 1000);
	  
  });  
  
  $('#text_input').bind('input',function(){ 
     var text=document.getElementById("text_input").value;
	  $("r1").html(text);
	  $("r3").html(text);
	  $("r4").html(text);
	});
$('#box1').bind('input',function(){ 
     var text=document.getElementById("box1").value;
	  $("a1").html(text);
	  
	});
$('#box2').bind('input',function(){ 
     var text=document.getElementById("box2").value;
	  $("b1").html(text);
	  
	});
$('#box3').bind('input',function(){ 
     var text=document.getElementById("box3").value;
	  $("c1").html(text);
	  
	});
$('#box4').bind('input',function(){ 
     var text=document.getElementById("box4").value;
	  $("d1").html(text);
	  
	});

  
  $('#html_input').bind('input',function(){ 
	  var text=document.getElementById("html_input").value;   
	  $("r2").html(text);
		});
  
    
  
  document.getElementById("button7").onclick = function() {
		
	  	
		
		if (document.getElementById("r10").checked)
			replies = "all";
		else
			replies = "none";
		
		if (document.getElementById("r20").checked)
			comments = true;
		else
			comments = false;

		
		str1 = "{\"imgUrl\":\"\",\"type\":\"primary\",\"content\":{\"text\":\""
				+ text_input
				+ "\",\"html\":\""
				+ html_input
				+ "\"},\"xslt\":\"primary-2.7.2\",";
		str1_survey = "{\"imgUrl\":\"\",\"type\":\"primary\",\"content\":{\"text\":\""
					+ text_input
					+ "\",\"html\":\""
					+ html_input
					+ "\"},\"xslt\":\"survey-2.7.2\",";
			
				
			str2 = "\"detailsLinkVisibility\":\""
				+ replies
				+ "\",\"actionreplace\": \"replace\",\"comments\": { \"addcomment\":\""
				+ comments + "\"},";
		str3 = "\"displayname\":\"Primary Chatlet\",";
		
		str2_poll = "\"detailsLinkVisibility\":\""
			+ "all"
			+ "\",\"summdesc\":{\"fields\":[{\"operation\":\"Count\",\"drilldown\":\"resp\",\"hidden\":\"true\",\"name\":\"yesno\",\"display\":\"Count\",\"fieldname\":\"resp\"}]},\"actionreplace\": \"replace\",\"comments\": { \"addcomment\":\""
			+ comments + "\"},";
	
		str2_survey = "\"detailsLinkVisibility\":\""
				+ "all"
				+ "\",\"summdesc\":{\"fields\":[{\"operation\":\"Count\",\"drilldown\":\"resp\",\"hidden\":\"true\",\"name\":\"yesno\",\"display\":\"Count\",\"fieldname\":\"resp\"}]},\"actionreplace\": \"replace\",\"comments\": { \"addcomment\":\""
				+ comments + "\"},";
		
		str4_survey="\"minCrv\":\"3\",\"rim\":{},\"queslabel\":\"Question\",\"opt1label\":\"Option1\",\"opt2label\":\"Option2\",\"opt3label\":\"Option3\",\"opt4label\":\"Option4\",";
			
			var str="";
			if($('#r01').is(':checked')){
				str=str1+str2_poll+str3;
			}

			if($('#r00').is(':checked')) str = str1 + str2 + str3;
		
			if($('#r02').is(':checked')) str = str1_survey + str2_survey + str3+str4_survey;
			
			
			console.log(str);
		var head=str;
		localStorage.setItem("head", str);
	
		
		
		if($('#r00').is(':checked')){
	var foot="";
	
	var n = replies.localeCompare("none");
	if(n==0) { foot = " \"detdesc\": { \"fields\": [] },\"actions\": { \"actitem\": [] }}"; localStorage.setItem("foot",foot);}
	else foot=localStorage.getItem("foot");
	
	var email = document.getElementById("email").value;
	console.log("calling text chatlet maker");
	postChatlet(head, foot, email);
		}
	
		if($('#r01').is(':checked')){
		var foot_poll="\"detdesc\":{\"label\":\"Replies\",\"showcount\":\"true\",\"fields\":[{\"display\":\"Response\",\"key\":\"resp\"}]},\"actions\":{\"actitem\":[{\"yesno\":{}}]}}";
		var email = document.getElementById("email").value;
		console.log("calling poll chatlet maker");
		postChatlet(head, foot_poll, email);
  }
  	
		if($('#r02').is(':checked')){
			var foot1_survey="\"detdesc\":{\"label\":\"Replies\",\"showcount\":\"true\",\"fields\":[{\"display\":\"Response\",\"key\":\"resp\"}]},";
			//{"actitem":[{"button":{"deffields":{"resp":"aaa"},"resptype":"sendmsg","label":"Reply"}}]}
			var foot2_survey="\"actions\":{\"actitem\":[";
			var arr="";
			
			var len=0;
			for(var i=1;i<=4;i++){
				var op=document.getElementById("box"+i).value;
				var n=op.localeCompare("");
				if(n!=0) len++;
			}
			
			var ind=1;
			for(ind=1;ind<len;ind++){
				var op=document.getElementById("box"+ind).value;
				arr=arr+"{\"button\":{\"deffields\":{\"resp\":\""+op+"\"},\"resptype\":\"sendmsg\",\"label\":\"Reply\"}},";
				}
			
			var op=document.getElementById("box"+ind).value;
			arr=arr+"{\"button\":{\"deffields\":{\"resp\":\""+op+"\"},\"resptype\":\"sendmsg\",\"label\":\"Reply\"}}]}}";
		
		
			var foot_survey=foot1_survey+foot2_survey+arr;
			console.log("calling survey chatlet maker");
			var email = document.getElementById("email").value;
			postChatlet(head, foot_survey, email);
			}
	};

	

	function postChatlet(head, foot, email) {
		
		
		console.log("head is --------"+head);
		console.log("foot is --------"+foot);
		
		
		var data1 = "{ \"data\":" + head + foot + ",\"email\":"
				+ "\"" + email + "\"" + "}";
		console.log(data1);
		$.ajax({
			type : "POST",
			url : "createchatlet",
			data : data1,
			success : function() {
				alert("success");
			}
		});
	}

  </script>
</body>
</html>
